window.rcmail&&rcmail.addEventListener("init",function(t){var o=[];if("mail"==t.task?""==t.action&&(1==rcmail.env.tour_walcome&&o.push({intro:rcmail.gettext("tour_walcome","tour")}),1==rcmail.env.tour_taskbar&&o.push({element:"#taskbar",intro:rcmail.gettext("tour_taskbar","tour"),position:"bottom-right-aligned"}),rcmail.env.tour_taskbar_buttons&&["mail","addressbook","cloud","calendar","tasklist","settings"].forEach(function(t,e,i){void 0!=rcmail.env.tour_taskbar_buttons[t]&&1==rcmail.env.tour_taskbar_buttons[t]&&o.push({element:"#taskbar .button-"+t,intro:rcmail.gettext("tour_taskbar_"+t,"tour"),position:"bottom-right-aligned"})}),1==rcmail.env.tour_toolbar&&o.push({element:"#messagetoolbar",intro:rcmail.gettext("tour_toolbar","tour"),position:"bottom-right-aligned"}),rcmail.env.tour_toolbar_buttons&&["archive","junk"].forEach(function(t,e,i){if(void 0!=rcmail.env.tour_toolbar_buttons[t]&&1==rcmail.env.tour_toolbar_buttons[t])switch(t){case"junk":o.push({element:"#messagetoolbar .button.junk, #messagetoolbar .button.markasjunk2",intro:rcmail.gettext("tour_toolbar_"+t,"tour"),position:"bottom"});break;default:o.push({element:"#messagetoolbar .button."+t,intro:rcmail.gettext("tour_toolbar_"+t,"tour"),position:"bottom"})}}),1==rcmail.env.tour_folders&&o.push({element:"classic"==rcmail.env.skin?"#mailboxlist-container ul":"#folderlist-content ul",intro:rcmail.gettext("tour_folders","tour"),position:"right"}),1==rcmail.env.tour_quota&&o.push({element:"classic"==rcmail.env.skin?"#quota":"#quotadisplay",intro:rcmail.gettext("tour_quota","tour"),position:"top"}),1==rcmail.env.tour_messages_view&&o.push({element:"#listmenulink",intro:rcmail.gettext("tour_messages_view","tour"),position:"bottom"}),1==rcmail.env.tour_messages_threads&&"classic"!=rcmail.env.skin&&o.push({element:"#listcontrols",intro:rcmail.gettext("tour_messages_threads","tour"),position:"top"})):"settings"==t.task&&""==t.action&&rcmail.env.tour_settings&&["preferences","folders","identities","responses","pluginmanagesieve","pluginmanagesievevacation","pluginpassword"].forEach(function(t,e,i){void 0!=rcmail.env.tour_settings[t]&&1==rcmail.env.tour_settings[t]&&o.push({element:"#settingstab"+t,intro:rcmail.gettext("tour_settings_"+t,"tour"),position:"right"})}),o.length>0){var e=introJs(),i=0;e.setOptions({nextLabel:rcmail.gettext("label_next","tour"),prevLabel:rcmail.gettext("label_prev","tour"),skipLabel:rcmail.gettext("label_skip","tour"),doneLabel:rcmail.gettext("label_done","tour"),hidePrev:!0,hideNext:!0,showStepNumbers:!1,showBullets:!1,disableInteraction:!0,exitOnOverlayClick:!1,tooltipPosition:"bottom"}),e.addSteps(o),e.oncomplete(function(){i=1,rcmail.http_post("plugin.tour_complete",{task:t.task,action:t.action,complete:2})}),e.onexit(function(){(void 0==i||0==i)&&rcmail.http_post("plugin.tour_complete",{task:t.task,action:t.action,complete:1})}),e.start()}});