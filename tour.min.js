window.rcmail&&rcmail.addEventListener("init",function(t){var e=[];if("mail"==t.task?""==t.action&&(1==rcmail.env.tour.welcome&&e.push({intro:rcmail.gettext("welcome","tour")}),1==rcmail.env.tour.taskbar&&e.push({element:"#taskbar",intro:rcmail.gettext("taskbar","tour"),position:"bottom-right-aligned"}),rcmail.env.tour.taskbar_buttons&&["mail","addressbook","cloud","calendar","tasklist","settings"].forEach(function(t,o,i){void 0!=rcmail.env.tour.taskbar_buttons[t]&&1==rcmail.env.tour.taskbar_buttons[t]&&e.push({element:"#taskbar .button-"+t,intro:rcmail.gettext("taskbar_"+t,"tour"),position:"bottom-right-aligned"})}),1==rcmail.env.tour.toolbar&&e.push({element:"#messagetoolbar",intro:rcmail.gettext("toolbar","tour"),position:"bottom-right-aligned"}),rcmail.env.tour.toolbar_buttons&&["archive","junk"].forEach(function(t,o,i){if(void 0!=rcmail.env.tour.toolbar_buttons[t]&&1==rcmail.env.tour.toolbar_buttons[t])switch(t){case"junk":e.push({element:"#messagetoolbar .button.junk, #messagetoolbar .button.markasjunk2",intro:rcmail.gettext("toolbar_"+t,"tour"),position:"bottom"});break;default:e.push({element:"#messagetoolbar .button."+t,intro:rcmail.gettext("toolbar_"+t,"tour"),position:"bottom"})}}),1==rcmail.env.tour.folders&&e.push({element:"classic"==rcmail.env.skin?"#mailboxlist-container ul":"#folderlist-content ul",intro:rcmail.gettext("folders","tour"),position:"right"}),1==rcmail.env.tour.quota&&e.push({element:"classic"==rcmail.env.skin?"#quota":"#quotadisplay",intro:rcmail.gettext("quota","tour"),position:"top"}),1==rcmail.env.tour.messages_view&&e.push({element:"widescreen"==rcmail.env.layout?"#listmenulink":".messagelist.fixedcopy #rcmthreads #listmenulink",intro:rcmail.gettext("messages_view","tour"),position:"bottom"}),1==rcmail.env.tour.messages_threads&&"classic"!=rcmail.env.skin&&e.push({element:"#listcontrols",intro:rcmail.gettext("messages_threads","tour"),position:"top"})):"settings"==t.task&&""==t.action&&rcmail.env.tour.settings&&["preferences","folders","identities","responses","pluginmanagesieve","pluginmanagesievevacation","pluginpassword"].forEach(function(t,o,i){void 0!=rcmail.env.tour.settings[t]&&1==rcmail.env.tour.settings[t]&&e.push({element:"#settingstab"+t,intro:rcmail.gettext("settings_"+t,"tour"),position:"right"})}),e.length>0){var o=introJs(),i=0;o.setOptions({nextLabel:rcmail.gettext("next","tour"),prevLabel:rcmail.gettext("prev","tour"),skipLabel:rcmail.gettext("skip","tour"),doneLabel:rcmail.gettext("done","tour"),hidePrev:!0,hideNext:!0,showStepNumbers:!1,showBullets:!1,disableInteraction:!0,exitOnOverlayClick:!1,tooltipPosition:"bottom"}),o.addSteps(e),o.oncomplete(function(){i=1,rcmail.http_post("plugin.tour_complete",{task:t.task,action:t.action,complete:2})}),o.onexit(function(){void 0!=i&&0!=i||rcmail.http_post("plugin.tour_complete",{task:t.task,action:t.action,complete:1})}),o.start()}});